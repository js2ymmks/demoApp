<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>給湯機</title>
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-7G91YF71NW"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());

    gtag('config', 'G-7G91YF71NW');
  </script>
  <link rel="stylesheet" href="../assets/css/style.css">
  <link rel="stylesheet" href="../assets/css/elements-potision.css">
  <script src="../assets/js/json.js"></script>
  <script src="../assets/js/script.js" defer></script>
</head>

<body>
  <div class="app-wrapper">
    <header>
    </header>

    <main class="app-wrapper-main">
      <div id="prevBtn"></div>
      <div id="nextBtn"></div>
      <div id="tankTab" class="tab-button" data-tab-name="タンク"></div>
      <div id="bathTab" class="tab-button" data-tab-name="おふろ"></div>
      <div id="shwrTab" class="tab-button" data-tab-name="蛇口・シャワー"></div>
      <img class="slide" src="../assets/img/tank.png" alt="tank">
      <img class="slide" src="../assets/img/bath.png" alt="bath">
      <img class="slide" src="../assets/img/shower.png" alt="shower">

      <!-- ふろ自動 ボタン -->
      <img id="bathAutoBtn">
    </main>

    <footer>
    </footer>

  </div>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      // 初期表示
      document.getElementById('bathAutoBtn').src = getJsonValue('baseUrl') + getJsonValue('bath.btnAutoOff');


      let currentIndex = 0;
      const images = document.querySelectorAll('.slide');
      const prevBtn = document.getElementById('prevBtn');
      const nextBtn = document.getElementById('nextBtn');
      const tankTab = document.getElementById('tankTab');
      const bathTab = document.getElementById('bathTab');
      const shwrTab = document.getElementById('shwrTab');

      const showSlide = (index) => {
        images.forEach((img, i) => {
          img.style.display = i === index ? 'block' : 'none';
        });

        // ボタン表示制御
        prevBtn.style.display = index === 0 ? 'none' : 'block';
        nextBtn.style.display = index === images.length - 1 ? 'none' : 'block';
      };

      const nextSlide = () => {
        currentIndex = Math.min(currentIndex + 1, images.length - 1);
        showSlide(currentIndex);
      };

      const prevSlide = () => {
        currentIndex = Math.max(currentIndex - 1, 0);
        showSlide(currentIndex);
      };

      const setIndex = (index) => {
        currentIndex = index;
        showSlide(currentIndex);
      };

      nextBtn.addEventListener('click', nextSlide);
      prevBtn.addEventListener('click', prevSlide);
      tankTab.addEventListener('click', () => setIndex(0));
      bathTab.addEventListener('click', () => setIndex(1));
      bathTab.addEventListener('click', () => document.getElementById('bathAutoBtn').src = getJsonValue('baseUrl') + getJsonValue('bath.btnAutoOn'));
      shwrTab.addEventListener('click', () => setIndex(2));
      shwrTab.addEventListener('click', () => document.getElementById('bathAutoBtn').src = getJsonValue('baseUrl') + getJsonValue('bath.btnAutoOff'));

      showSlide(currentIndex);
    });
  </script>

  <script>
    document.querySelectorAll('.tab-button').forEach((tab) => {
      tab.addEventListener('click', function () {
        const tabName = this.dataset.tabName;
        gtag('event', 'tab_click', {
          tab_name: tabName,
          page_path: window.location.pathname
        });
      });
    });
  </script>
</body>

</html>